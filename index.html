<!DOCTYPE html>
<html>

<head>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, user-scalable=no,
		shrink-to-fit=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.21.7.js"></script>

	<title>Lab 4</title>

</head>

<body>

  <p id=”test”> lol </p>


  <!-- Instantiate PubNub -->

  <script>

  var pubnubDemo = new PubNub({

  publishKey: 'pub-c-02c1869a-f2fe-4f32-ae53-e7cca5c20e04',

  subscribeKey: 'sub-c-352e2e98-6800-11e9-b514-6a4d3cd75da8'

  });

  // Publish a simple message to the “demo_tutorial” channel pubnub:

  pubnubDemo.publish({ message: { "color" : "blue" }, channel: 'north_channel' });

  pubnubDemo.addListener({

      message: function(message){

      //console.log(message)
      document.getElementById('heading').innerHTML = "ASD"

  }

  })

  // subscriba till olika kanaler beroende på om kompassen pekar på norr/syd osv.

  // skapa unsubscribe sedan för att man inte kan subscriba till flera kanaler samtidigt

  // Get event data
function deviceOrientationListener(event) {
  var alpha   = event.alpha; //z axis rotation [0,360)
  // var beta     = event.beta; //x axis rotation [-180, 180]
  // var gamma   = event.gamma; //y axis rotation [-90, 90]
	document.getElementById('test').innerHTML = alpha;

		  // if ((0 < alpha && alpha < 45) || (315 < alpha && alpha < 360)){
		  //   pubnubDemo.subscribe({
			//     channels: ['north_channel']
		  //   });
		  // }
	    // else if (45 < alpha && alpha < 135 ){
	    //   pubnubDemo.subscribe({
		  //     channels: ['east_channel']
	    //   });
	    // }
			//
      // else if (135 < alpha && alpha < 225 ){
	    //     pubnubDemo.subscribe({
		  //       channels: ['south_channel']
	    //     });
      //   }
			//
      //   else if (225 < alpha && alpha < 315 ){
      //     pubnubDemo.subscribe({
	    //       channels: ['west_channel']
      //     });
			//
      //   }

      }

			if (window.deviceOrientationEvent){
				window.addEventListener(
					"deviceOrientation",
					deviceOrientationListener,
					true
				);
			} else {
				alert("Bajs!");
			}





  //Check if absolute values have been sent
  // if (typeof event.webkitCompassHeading !== "undefined") {
  //   alpha = event.webkitCompassHeading; //for iOS devices
  //   var heading = alpha
  //   document.getElementById("heading").innerHTML = heading.toFixed([0]);
  // }
  // else {
  //   alert("Your device is reporting relative alpha values, so this compass won't point north :(");
  //   var heading = 360 - alpha; //heading [0, 360)
  //   document.getElementById("heading").innerHTML = heading.toFixed([0]);
  // }
}


</script>


</body>
